<p>
  <%= link_to_remote t('page.previous'), :update => 'library_calendar', :url => library_path(@library.short_name, :date => (@date - 1.month).strftime('%Y-%m-%d')), :method => :get -%>
  <%= link_to_remote t('page.this_month'), :update => 'library_calendar', :url => library_path(@library.short_name, :date => Time.zone.now.strftime('%Y-%m-%d')), :method => :get -%>
  <%= link_to_remote t('page.next'), :update => 'library_calendar', :url => library_path(@library.short_name, :date => (@date + 1.month).strftime('%Y-%m-%d')), :method => :get -%>
</p>
<%= calendar(:year => @date.year, :month => @date.month) do |date|
  cal_text = (link_to h(date.mday), "/calendar/" + date.strftime("%Y-%m-%d")) + "<br />"
  events = @library.events.on(date.to_s)
  events.each do |event|
    cal_text += (link_to h(event.title), event)  + "<br />"
  end
  [cal_text, {:class => 'specialDay'}]
end -%>
