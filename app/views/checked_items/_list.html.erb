<div style="color: red"><%= flash[:message].to_s -%></div>

<%- remote_form_for @checked_item, :html => {:method => :post}, :update => :checked_item_list, :url => user_basket_checked_items_path(@basket.user.login, @basket, :mode => 'list') do |f| -%>
  <div>
    <%= ('Item identifier') -%>: <%= f.text_field :item_identifier -%>
    <%= submit_tag t('create') -%>
  </div>
<%- end -%>
<%= javascript_tag("$('checked_item_item_identifier').focus()") -%>
<table style="width: 100%">
  <tr>
    <th class="checked_item_title"><%= ('Title') -%></th>
    <th><%= ('Item identifier') -%></th>
    <th><%= ('Due date') -%></th>
  </tr>

<%- @checked_items.each_with_index do |checked_item, i| -%>
  <tr class="line<%= cycle("0", "1") -%>">
    <td>
      <%= render :partial => 'manifestations/show_index', :locals => {:manifestation => checked_item.item.manifestation} -%>
      <div class="holding" id="holding_<%=h checked_item.item.manifestation.id -%>"></div>
    </td>
    <td><%= link_to h(checked_item.item.item_identifier), item_path(checked_item.item) -%></td>
    <td><%=h checked_item.due_date.strftime('%Y-%m-%d') -%></td>
    <td><%= link_to t('destroy'), user_basket_checked_item_path(checked_item.basket.user.login, checked_item.basket, checked_item), :confirm => ('Are you sure?'), :method => :delete -%></td>
  </tr>
<%- end -%>
</table>

<%- form_for(:basket, :url => {:controller => 'baskets', :action => 'update', :id => @basket.id}, :html => { :method => :put }) do |f| -%>
  <div>
    <%= f.submit 'Checkout' -%>
  </div>
<%- end -%>
