<div id="content_detail">
  <h1 class="title"><%= t('page.showing', :model => t('activerecord.models.work')) -%></h1>
<div id="content_list">

  <%-
    cache(:id => @work.id, :action => :show, :controller => :works, :editable => @work.is_updatable_by(current_user), :locale => @locale, :version => @version) do
  -%>
  <h2 class="resource_title">
    [W]
    <%= @work.original_title -%>
  </h2>
  <%- if @version -%>
    <p>(<%= l(@work.versions.find(@version).created_at) -%>)</p>
  <%- end -%>

  <p>
    <%= raw patrons_list(@work.patrons) -%>
  </p>
  <div id="tabs">
    <ul class="yui-nav">
      <li title="active" class="selected"><a href="#detail"><em><%= t('page.detail') -%></em></a></li>
      <%- if @work.derived_works.present? or @work.original_works.present? -%>
        <li><a href="#work"><em><%= t('page.related') -%></em></a></li>
      <%- end -%>
      <%- unless @work.patrons.empty? -%>
        <li><a href="#patron"><em><%= t('page.author') -%></em></a></li>
      <%- end -%>
      <%- unless @work.expressions.empty? -%>
        <li><a href="#expression"><em><%= t('activerecord.models.expression') -%></em></a></li>
      <%- end -%>
      <%- unless @work.manifestations.empty? -%>
        <li><a href="#manifestation"><em><%= t('page.related_manifestation') -%></em></a></li>
      <%- end -%>
      <li><a href="#history"><em><%= t('page.history') -%></em></a></li>
    </ul>
      <div id="detail">
        <table class="index">
          <tr>
            <td style="width: 200px"><strong><%= t('activerecord.attributes.work.title_transcription') -%>:</strong></td>
            <td>
              <%= @work.title_transcription -%>
            </td>
          </tr>
          <tr>
            <td><strong><%= t('activerecord.models.form_of_work') -%>:</strong></td>
            <td>
              <%= link_to h(@work.form_of_work.display_name.localize), @work.form_of_work -%>
            </td>
          </tr>
          <tr>
            <td><strong><%= t('activerecord.models.series_statement') -%>:</strong></td>
            <td>
              <%= link_to h(@work.series_statement.original_title), @work.series_statement if @work.series_statement -%>
            </td>
          </tr>
          <tr>
            <td><strong><%= t('activerecord.attributes.work.context') -%>:</strong></td>
            <td>
              <%= @work.context -%>
            </td>
          </tr>
          <tr>
            <td><strong><%= t('activerecord.attributes.work.note') -%>:</strong></td>
            <td>
              <%= @work.note -%>
            </td>
          </tr>
          <tr>
            <td><strong><%= t('page.created_at') -%>:</strong></td>
            <td><%= l(@work.created_at) -%></td>
          </tr>
          <tr>
            <td><strong><%= t('page.updated_at') -%>:</strong></td>
            <td><%= l(@work.updated_at) -%></td>
          </tr>
        </table>
        <%= render :partial => 'works/show_subject_list' -%>
      </div>
      <%- if @work.derived_works.present? or @work.original_works.present? -%>
        <%= render :partial => 'works/work_list' -%>
      <%- end -%>
      <%- unless @work.patrons.empty? -%>
        <%= render :partial => 'works/patron_list' -%>
      <%- end -%>
      <%- unless @work.expressions.empty? -%>
        <%= render :partial => 'works/expression_list' -%>
      <%- end -%>
      <%- unless @work.manifestations.empty? -%>
        <%= render :partial => 'works/manifestation_list' -%>
      <%- end -%>
      <%= render :partial => 'history_list' -%>
    </div>
  </div>
<%= render :partial => 'page/tabview' -%>
<%- end -%>
</div>

<div id="submenu">  
  <ul>
    <li><%= link_to t('page.listing', :model => t('activerecord.models.work')), works_path -%></li>
    <li><%= link_to t('page.add_derivation'), work_works_path(@work) -%></li>
    <%- if @work.is_deletable_by(current_user) -%>
      <li><%= link_to t('page.new', :model => t('activerecord.models.work')), new_work_path -%></li>
      <li><%= link_to t('page.edit'), edit_work_path(@work) -%></li>
      <li><%= link_to t('page.destroy'), @work, :confirm => t('page.are_you_sure'), :method => :delete -%></li>
    <%- end -%>
  </ul>
  <ul>
    <li><%= link_to t('page.listing', :model => t('activerecord.models.patron')), work_patrons_path(@work) -%></li>
    <li><%= link_to t('page.listing', :model => t('activerecord.models.expression')), work_expressions_path(@work) -%></li>
    <li><%= link_to t('page.listing', :model => t('activerecord.models.subject')), work_subjects_path(@work) -%></li>
  </ul>
</div>
